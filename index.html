<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Prueba Virtual de Gafas - √ìptica Villa del Mar</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #0066CC, #0052a3);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .main-content {
            padding: 40px;
        }

        .preview-section {
            display: flex;
            gap: 30px;
            margin-bottom: 40px;
            flex-wrap: wrap;
        }

        .model-viewer {
            flex: 1;
            min-width: 300px;
        }

        .model-image {
            width: 100%;
            max-width: 600px;
            height: auto;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            margin: 0 auto;
            display: block;
            transition: transform 0.3s;
        }

        .model-image:hover {
            transform: scale(1.02);
        }

        .product-info {
            flex: 1;
            min-width: 300px;
        }

        .product-title {
            font-size: 2em;
            color: #333;
            margin-bottom: 15px;
        }

        .product-price {
            font-size: 2.5em;
            color: #0066CC;
            font-weight: bold;
            margin-bottom: 20px;
        }

        .product-description {
            color: #666;
            line-height: 1.8;
            margin-bottom: 25px;
        }

        .features {
            list-style: none;
            margin-bottom: 25px;
        }

        .features li {
            padding: 10px 0;
            border-bottom: 1px solid #eee;
            display: flex;
            align-items: center;
        }

        .features li:before {
            content: "‚úì";
            color: #28a745;
            font-weight: bold;
            margin-right: 10px;
            font-size: 1.2em;
        }

        .glasses-selector {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }

        .glass-card {
            border: 3px solid #ddd;
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            background: white;
        }

        .glass-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0,102,204,0.3);
        }

        .glass-card.active {
            border-color: #0066CC;
            background: #e6f2ff;
            box-shadow: 0 10px 25px rgba(0,102,204,0.3);
        }

        .glass-card img {
            width: 100%;
            height: 100px;
            object-fit: contain;
            margin-bottom: 15px;
        }

        .glass-card h3 {
            color: #333;
            margin-bottom: 10px;
            font-size: 1.1em;
        }

        .glass-card .price {
            color: #0066CC;
            font-weight: bold;
            font-size: 1.3em;
        }

        .upload-section {
            background: #f8f9fa;
            padding: 30px;
            border-radius: 15px;
            margin: 30px 0;
            text-align: center;
        }

        .upload-section h3 {
            color: #333;
            margin-bottom: 20px;
        }

        .upload-box {
            border: 3px dashed #0066CC;
            border-radius: 15px;
            padding: 40px;
            background: white;
            cursor: pointer;
            transition: all 0.3s;
        }

        .upload-box:hover {
            background: #e6f2ff;
            border-color: #0052a3;
        }

        .upload-box input {
            display: none;
        }

        .action-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
            margin-top: 30px;
        }

        .btn {
            padding: 15px 40px;
            border: none;
            border-radius: 50px;
            font-size: 1.1em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            text-decoration: none;
            display: inline-block;
        }

        .btn-primary {
            background: linear-gradient(135deg, #0066CC, #0052a3);
            color: white;
            box-shadow: 0 5px 15px rgba(0,102,204,0.4);
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(0,102,204,0.6);
        }

        .btn-secondary {
            background: white;
            color: #0066CC;
            border: 2px solid #0066CC;
        }

        .btn-secondary:hover {
            background: #0066CC;
            color: white;
        }

        .footer {
            background: #f8f9fa;
            padding: 30px;
            text-align: center;
            color: #666;
        }

        .footer-info {
            display: flex;
            justify-content: center;
            gap: 30px;
            flex-wrap: wrap;
            margin-top: 15px;
        }

        .loader {
            display: none;
            border: 5px solid #f3f3f3;
            border-top: 5px solid #0066CC;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 1s linear infinite;
            margin: 20px auto;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .upload-preview {
            display: none;
            margin-top: 20px;
            padding: 15px;
            background: #e6f2ff;
            border-radius: 10px;
            color: #0066CC;
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 1.8em;
            }

            .preview-section {
                flex-direction: column;
            }

            .product-title {
                font-size: 1.5em;
            }

            .product-price {
                font-size: 2em;
            }

            .main-content {
                padding: 20px;
            }

            .glasses-selector {
                grid-template-columns: 1fr;
            }

            .btn {
                padding: 12px 30px;
                font-size: 1em;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üëì Prueba Virtual de Gafas</h1>
            <p>Descubre tu estilo perfecto - √ìptica Villa del Mar</p>
        </div>

        <div class="main-content">
            <div class="preview-section">
                <div class="model-viewer">
                    <img id="modelImage" class="model-image" 
                         src="https://images.unsplash.com/photo-1509967419530-da38b4704bc6?w=600&q=80" 
                         alt="Modelo con gafas">
                </div>

                <div class="product-info">
                    <h2 class="product-title" id="productName">Ray-Ban Wayfarer Classic</h2>
                    <div class="product-price" id="productPrice">155‚Ç¨</div>
                    
                    <p class="product-description" id="productDesc">
                        Las ic√≥nicas Wayfarer de Ray-Ban. Un cl√°sico atemporal que nunca pasa de moda.
                        Perfectas para cualquier ocasi√≥n, desde la playa hasta la ciudad.
                    </p>

                    <ul class="features" id="productFeatures">
                        <li>Protecci√≥n UV400 certificada</li>
                        <li>Lentes polarizadas</li>
                        <li>Montura de acetato italiano</li>
                        <li>Incluye funda r√≠gida original</li>
                        <li>Garant√≠a 2 a√±os</li>
                    </ul>
                </div>
            </div>

            <h2 style="text-align: center; color: #333; margin-bottom: 30px;">
                Elige tu modelo favorito
            </h2>

            <div class="glasses-selector">
                <div class="glass-card active" data-product="wayfarer">
                    <img src="https://images.unsplash.com/photo-1511499767150-a48a237f0083?w=200&q=80" alt="Ray-Ban Wayfarer">
                    <h3>Ray-Ban Wayfarer</h3>
                    <div class="price">155‚Ç¨</div>
                </div>

                <div class="glass-card" data-product="hawkers">
                    <img src="https://images.unsplash.com/photo-1473496169904-658ba7c44d8a?w=200&q=80" alt="Hawkers Carbono">
                    <h3>Hawkers Carbono</h3>
                    <div class="price">35‚Ç¨</div>
                </div>

                <div class="glass-card" data-product="clubmaster">
                    <img src="https://images.unsplash.com/photo-1509695507497-903c140c43b0?w=200&q=80" alt="Ray-Ban Clubmaster">
                    <h3>Ray-Ban Clubmaster</h3>
                    <div class="price">165‚Ç¨</div>
                </div>

                <div class="glass-card" data-product="aviator">
                    <img src="https://images.unsplash.com/photo-1577803645773-f96470509666?w=200&q=80" alt="Ray-Ban Aviator">
                    <h3>Ray-Ban Aviator</h3>
                    <div class="price">165‚Ç¨</div>
                </div>
            </div>

            <div class="upload-section">
                <h3>üì∏ ¬øQuieres verte con estas gafas?</h3>
                <p style="color: #666; margin-bottom: 20px;">
                    Sube una foto tuya para visualizar c√≥mo te quedan
                </p>
                
                <div class="upload-box" id="uploadBox">
                    <input type="file" id="photoUpload" accept="image/*">
                    <div style="font-size: 3em; margin-bottom: 10px;">üì§</div>
                    <p style="color: #0066CC; font-weight: bold;">
                        Haz clic para subir tu foto
                    </p>
                    <p style="color: #999; font-size: 0.9em; margin-top: 10px;">
                        JPG, PNG o JPEG (m√°x 5MB)
                    </p>
                </div>

                <div class="loader" id="loader"></div>
                <div class="upload-preview" id="uploadPreview">
                    ‚úì Foto cargada correctamente. En la versi√≥n completa con IA, superpondr√≠amos las gafas autom√°ticamente sobre tu rostro.
                </div>
            </div>

            <div class="action-buttons">
                <button class="btn btn-primary" id="buyButton">
                    üí≥ Comprar ahora
                </button>
                <button class="btn btn-secondary" id="appointmentButton">
                    üìÖ Reservar cita para probar
                </button>
            </div>
        </div>

        <div class="footer">
            <p style="font-weight: bold; color: #333; margin-bottom: 10px;">
                √ìptica Villa del Mar - Tu vista, nuestra pasi√≥n desde 1978
            </p>
            <div class="footer-info">
                <div>üìç Calle Mayor, 45 - Villa del Mar (Cantabria)</div>
                <div>üìû 942 84 20 15</div>
                <div>üí¨ 688 92 34 56</div>
            </div>
        </div>
    </div>

    <script>
        // Base de datos de productos
        const products = {
            wayfarer: {
                name: 'Ray-Ban Wayfarer Classic',
                price: 155,
                description: 'Las ic√≥nicas Wayfarer de Ray-Ban. Un cl√°sico atemporal que nunca pasa de moda. Perfectas para cualquier ocasi√≥n, desde la playa hasta la ciudad.',
                image: 'https://images.unsplash.com/photo-1509967419530-da38b4704bc6?w=600&q=80',
                features: [
                    'Protecci√≥n UV400 certificada',
                    'Lentes polarizadas',
                    'Montura de acetato italiano',
                    'Incluye funda r√≠gida original',
                    'Garant√≠a 2 a√±os'
                ],
                productId: 'rayban-wayfarer'
            },
            hawkers: {
                name: 'Hawkers Carbono Black',
                price: 35,
                description: 'Dise√±o urbano y moderno. Perfectas para el d√≠a a d√≠a con un toque deportivo. Excelente relaci√≥n calidad-precio.',
                image: 'https://images.unsplash.com/photo-1511499767150-a48a237f0083?w=600&q=80',
                features: [
                    'Protecci√≥n UV400',
                    'Montura TR90 ultraligera',
                    'Lentes de policarbonato',
                    'Incluye funda de microfibra',
                    'Garant√≠a 1 a√±o'
                ],
                productId: 'hawkers-carbono'
            },
            clubmaster: {
                name: 'Ray-Ban Clubmaster',
                price: 165,
                description: 'Estilo retro-elegante. Combinaci√≥n perfecta de metal y acetato. Para quienes buscan distinguirse con clase.',
                image: 'https://images.unsplash.com/photo-1509695507497-903c140c43b0?w=600&q=80',
                features: [
                    'Protecci√≥n UV400 certificada',
                    'Lentes de cristal mineral',
                    'Montura mixta metal-acetato',
                    'Incluye funda r√≠gida premium',
                    'Garant√≠a 2 a√±os'
                ],
                productId: 'rayban-clubmaster'
            },
            aviator: {
                name: 'Ray-Ban Aviator Classic',
                price: 165,
                description: 'El modelo que lo inici√≥ todo. Dise√±o aviador original desde 1937. Un icono intemporal de la historia de las gafas de sol.',
                image: 'https://images.unsplash.com/photo-1577803645773-f96470509666?w=600&q=80',
                features: [
                    'Protecci√≥n UV400 certificada',
                    'Lentes de cristal G-15',
                    'Montura met√°lica ligera',
                    'Incluye funda de cuero',
                    'Garant√≠a 2 a√±os'
                ],
                productId: 'rayban-aviator'
            }
        };

        let currentProduct = 'wayfarer';
        const chatbotURL = 'https://www.chatbase.co/chatbot-iframe/YOUR-CHATBOT-ID'; // Reemplazar con tu ID real

        // Seleccionar gafas
        document.querySelectorAll('.glass-card').forEach(card => {
            card.addEventListener('click', function() {
                const productKey = this.getAttribute('data-product');
                selectGlasses(productKey);
            });
        });

        function selectGlasses(productKey) {
            currentProduct = productKey;
            const product = products[productKey];

            // Actualizar UI
            document.getElementById('modelImage').src = product.image;
            document.getElementById('modelImage').alt = `Modelo con gafas ${product.name}`;
            document.getElementById('productName').textContent = product.name;
            document.getElementById('productPrice').textContent = product.price + '‚Ç¨';
            document.getElementById('productDesc').textContent = product.description;

            // Actualizar features
            const featuresList = document.getElementById('productFeatures');
            featuresList.innerHTML = product.features.map(f => `<li>${f}</li>`).join('');

            // Actualizar tarjetas
            document.querySelectorAll('.glass-card').forEach(card => {
                card.classList.remove('active');
            });
            event.target.closest('.glass-card').classList.add('active');

            // Scroll suave al preview
            document.querySelector('.preview-section').scrollIntoView({ 
                behavior: 'smooth', 
                block: 'start' 
            });
        }

        // Manejar subida de foto
        document.getElementById('uploadBox').addEventListener('click', function() {
            document.getElementById('photoUpload').click();
        });

        document.getElementById('photoUpload').addEventListener('change', function(event) {
            const file = event.target.files[0];
            if (!file) return;

            // Validar tipo de archivo
            if (!file.type.startsWith('image/')) {
                alert('Por favor, sube solo archivos de imagen (JPG, PNG, etc.)');
                return;
            }

            // Validar tama√±o (m√°x 5MB)
            if (file.size > 5 * 1024 * 1024) {
                alert('La imagen es demasiado grande. M√°ximo 5MB.');
                return;
            }

            const loader = document.getElementById('loader');
            const uploadPreview = document.getElementById('uploadPreview');
            
            loader.style.display = 'block';
            uploadPreview.style.display = 'none';

            // Leer y mostrar la imagen
            const reader = new FileReader();
            reader.onload = function(e) {
                setTimeout(() => {
                    document.getElementById('modelImage').src = e.target.result;
                    loader.style.display = 'none';
                    uploadPreview.style.display = 'block';
                }, 1500);
            };
            reader.readAsDataURL(file);
        });

        // Bot√≥n Comprar ahora
        document.getElementById('buyButton').addEventListener('click', function() {
            const product = products[currentProduct];
            const message = `Hola! Quiero comprar las ${product.name} (${product.price}‚Ç¨). ¬øMe ayudas con el proceso de compra?`;
            
            // Abrir chatbot de Chatbase (si est√° embebido)
            if (window.parent !== window) {
                window.parent.postMessage({
                    action: 'open_chat',
                    message: message
                }, '*');
            } else {
                // Alternativa: Abrir WhatsApp temporal o mostrar alerta
                alert(`Para comprar las ${product.name}, por favor contacta con nuestro chatbot o llama al 942 84 20 15`);
                // O redirigir a p√°gina con chatbot embebido
                // window.location.href = 'https://tu-sitio.com/chatbot';
            }
        });

        // Bot√≥n Reservar cita
        document.getElementById('appointmentButton').addEventListener('click', function() {
            const product = products[currentProduct];
            const message = `Hola! Me gustar√≠a reservar una cita para probar las ${product.name}. ¬øCu√°ndo ten√©is disponibilidad?`;
            
            // Abrir chatbot de Chatbase
            if (window.parent !== window) {
                window.parent.postMessage({
                    action: 'open_chat',
                    message: message
                }, '*');
            } else {
                alert(`Para reservar cita y probar las ${product.name}, por favor contacta con nuestro chatbot o llama al 942 84 20 15`);
            }
        });

        // Drag and drop para subir foto
        const uploadBox = document.getElementById('uploadBox');
        
        uploadBox.addEventListener('dragover', function(e) {
            e.preventDefault();
            this.style.background = '#e6f2ff';
        });

        uploadBox.addEventListener('dragleave', function() {
            this.style.background = 'white';
        });

        uploadBox.addEventListener('drop', function(e) {
            e.preventDefault();
            this.style.background = 'white';
            
            const file = e.dataTransfer.files[0];
            if (file && file.type.startsWith('image/')) {
                document.getElementById('photoUpload').files = e.dataTransfer.files;
                document.getElementById('photoUpload').dispatchEvent(new Event('change'));
            }
        });
    </script>
</body>
</html>
